---
import Base from "@/layouts/Base.astro";
import {markdownify} from "@/lib/utils/textConverter";
import CallToAction from "@/partials/CallToAction.astro";
import Testimonial from "@/partials/Testimonial.astro";
import type {Button, Feature} from "@/types";
import {Image} from "@astrojs/image/components";
import {getEntryBySlug} from "astro:content";

interface Homepage {
  features: Feature[];
}

const homepage = await getEntryBySlug("homepage", "index");
const testimonial = await getEntryBySlug("sections", "testimonial");
const call_to_action = await getEntryBySlug("sections", "call-to-action");
const {banner, features}: Homepage = homepage.data;
---

<Base>
<!-- Banner -->
<section class="section pt-14">
    <div class="container">
        <div class="row justify-center">
            <div class="mb-16 text-center lg:col-7">
                <h1 class="mb-2">THW-Höhenrettung Braunschweig</h1>
                <p>Seit 1998 in Braunschweig</p>
            </div>
            <div class="col-12">
                <img
                        src="/images/banner.png"
                        width="1272"
                        height="403"
                        alt="banner image"
                />
            </div>
        </div>
    </div>
</section>
<!-- Einsatzmöglichkeiten -->
<section class="section-sm bg-gradient">
    <div class="container">
        <div class="row items-center justify-between">
            <div class="mb:md-0 mb-6 md:col-5 md:order-2">
                <Image
                        format="png"
                        src="/images/placeholder_1.jpg"
                        height={480}
                        width={520}
                        fit="contain"
                        background="rgba(0,0,0,0)"
                        alt="placeholder_1"
                />
            </div>
            <div class="md:col-7 lg:col-6 md:order-2">
                <h2 class="mb-4">Einsatzmöglichkeiten </h2>
                <p class="mb-4 text-lg">Als Höhenretter sind wir vielseitig einsetzbar. Zu unseren
                    Haupt-Einsatzmöglichkeiten gehören:</p>
                <ul>
                    <li class="mb-4">
                        <i class="fa-solid fa-arrow-right"></i>
                        <span>Rettung von Personen aus der Höhe</span>
                    </li>
                    <li class="mb-4">
                        <i class="fa-solid fa-arrow-right"></i>
                        <span>Rettung von Personen aus der Tiefe</span>
                    </li>
                    <li class="mb-4">
                        <i class="fa-solid fa-arrow-right"></i>
                        <span>Sicherung von Einsatzkräften in absturzgefährdeten Bereichen</span>
                    </li>
                    <li class="mb-4">
                        <i class="fa-solid fa-arrow-right"></i>
                        <span>Technische Hilfeleistung in Höhen und Tiefen</span>
                    </li>
                </ul>
                <a class="btn btn-primary mt-5" href="/einsatzmoeglichkeiten">
                    Mehr Erfahren
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Features -->
// {
  //   features.map((feature, index: number) => (
//   <section class={`section-sm ${index % 2 === 0 && "bg-gradient"}`}>
//       <div class="container">
//           <div class="row items-center justify-between">
//               <div
//                       class={`mb:md-0 mb-6 md:col-5 ${index % 2 !== 0 && "md:order-2"}`}
//               >
//                   <Image
//                           format="png"
//                           src={feature.image}
//                           height={480}
//                           width={520}
//                           fit="contain"
//                           background="rgba(0,0,0,0)"
//                           alt={feature.title}
//                   />
//               </div>
//               <div class={`md:col-7 lg:col-6 ${index % 2 !== 0 && "md:order-1"}`}>
//                   <h2 set:html={markdownify(feature.title)} class="mb-4">asdasdasd</h2>
//                   <p set:html={markdownify(feature.content)} class="mb-8 text-lg"/>
//                   <ul>
//                     {feature.bulletpoints.map((bullet: string) => (
//                             <li class="relative mb-4 pl-6">
//                                 <span set:html={markdownify(bullet)}/>
//                             </li>
//                     ))}
//                   </ul>
//                 {feature.button.enable && (
//                         <a class="btn btn-primary mt-5" href={feature.button.link}>
//                           {feature.button.label}
//                         </a>
//                 )}
//               </div>
//           </div>
//       </div>
//   </section>
//     ))
//   }
<!-- /Features -->

<Testimonial testimonial={testimonial}/>
<CallToAction call_to_action={call_to_action}/>
        </Base>
